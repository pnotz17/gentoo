#!/bin/sh
FIRST="$1"
shift

case "$FIRST" in
	update)
		 (doas pacman -Syu --noconfirm; notify-send "âœ… Update finished") ;
		notify-send "ğŸ“¦ Package update" "Updating all packages..."
		;;
	install)
		notify-send --urgency=low "ğŸ”ƒ Loading packages"
		PKGNAME="$(pacman -Ss | grep -Eo '^\S+' |
			dmenu -p "Package to install:" $@)" || exit 1
		 (doas pacman -Su --noconfirm $PKGNAME &&
			notify-send "âœ… $PKGNAME installed!" ||
			notify-send "âŒ Installation of $PKGNAME failed") ;
		notify-send "ğŸ“¦ Package installation" "Installing $PKGNAME..."
		;;
	remove)
		notify-send --urgency=low "ğŸ”ƒ Loading packages"
		PKGNAME="$(pacman -Qs | grep -Eo '^\S+' |
			dmenu -p "Package to remove:" $@)" || exit 1
		 (doas pacman -Su --noconfirm $PKGNAME &&
			notify-send "âœ… $PKGNAME removed!" ||
			notify-send "âŒ Removing $PKGNAME failed") ;
		notify-send "ğŸ“¦ Package removal" "Removing $PKGNAME..."
		;;
	*)
		notify-send "ğŸ˜¥ Unknown option:" "$FIRST"
		exit 1
		;;
esac

