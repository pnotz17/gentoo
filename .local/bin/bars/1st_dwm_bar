#!/bin/sh

while true; do

PKGS=$(checkupdates 2> /dev/null |pacman -Q  |  wc -l)
PACMAN=$(checkupdates 2> /dev/null | wc -l )
TEMP=$(sensors | grep Core | awk '{print substr($3, 2, length($3)-5)}' | tr "\\n" " " | sed 's/ /Â°C  /g' | sed 's/  $//')
DISKHOME=$(df -Ph | grep "/dev/sda2" | awk {'print $5'})
MEM=$(free -h --kilo | awk '/^Mem:/ {print $3 "/" $2}')
LINUX=$(uname -r)
TOTALDOWN=$(doas ifconfig lo | grep "RX packets" | awk {'print $6 $7'})
TOTALUP=$(doas ifconfig lo | grep "TX packets" | awk {'print $6 $7'})
CPU=$(top -bn1 | grep "Cpu(s)" | sed "s/.*, *\([0-9.]*\)%* id.*/\1/" | awk '{print 100 - $1"%"}')
WEATHER=$(curl wttr.in/Florina?format="%l:+%m+%p+%w+%t+%c+%C")
DATE=$(date '+%Y-%m-%d %H:%M:%S')
VOL=$(amixer get Master | tail -n1 | sed -r 's/.*\[(.*)%\].*/\1/')

xsetroot -name "Kernel: $LINUX | CPU: $CPU | MEM: $MEM | NET: T/UP: $TOTALUP T/DOWN: $TOTALDOWN | VOL: $VOL | $DATE |"
	sleep 5s
done &
